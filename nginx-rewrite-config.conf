# HQMX Converter - 다국어 URL 라우팅 설정
# /{언어코드}/{from}-to-{to} → /index.html with parameters

location ~ ^/(en|de|es|fr|hi|id|it|ko|ja|my|ms|fil|pt|ru|th|tr|vi|zh-CN|zh-TW|ar|bn)/([a-z0-9]+)-to-([a-z0-9]+)/?$ {
    # 언어코드와 변환 타입을 쿼리 파라미터로 전달
    rewrite ^/([^/]+)/([^/]+)-to-([^/]+)/?$ /index.html?lang=$1&from=$2&to=$3 last;
}

# 언어코드만 있는 경우 (홈페이지)
location ~ ^/(en|de|es|fr|hi|id|it|ko|ja|my|ms|fil|pt|ru|th|tr|vi|zh-CN|zh-TW|ar|bn)/?$ {
    rewrite ^/([^/]+)/?$ /index.html?lang=$1 last;
}

# 기본 index.html은 그대로 처리
location / {
    try_files $uri $uri/ /index.html;
}
